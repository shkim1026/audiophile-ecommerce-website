
{{ 'component-facets.css' | asset_url | stylesheet_tag }}
<script src="{{ 'facets.js' | asset_url }}" defer="defer"></script>

<div class="page-width" id="main-collection-filters" data-id="{{ section.id }}">
{% render 'facets', results: collection, enable_filtering: section.settings.enable_filtering, enable_sorting: section.settings.enable_sorting, collapse_on_larger_devices: section.settings.collapse_on_larger_devices %}
</div>


<div class="product-grid" id="ProductGridContainer">
    <ul class="display-grid" id="product-grid" data-id="{{ section.id }}" >
        {% for product in collection.products %}
            <a href="{{ product.url }}">
                <li class="product-grid__list-item">
                    <img class="featured-image" src="{{ product.featured_image | img_url: 'medium' }}">
                    {% for image in product.images %}
                        {% if forloop.index == 2 %}
                            <input type="hidden" id="initial-image" value="{{ product.featured_image | img_url: 'medium' }}">
                            <input type="hidden" id="hovered-image" value="{{ image | img_url: 'medium' }}">
                        {% endif %}
                    {% endfor %}
                    <h4 class="product-grid__title">{{ product.title }}</h4>
                    <div class="yotpo bottomLine yotpo__collections-page"
                        data-product-id="{{ product.id }}">
                    </div>
                    <h5 class="product-grid__vendor">{{ product.vendor }}</h5>
                    <h6 class="product-grid__price">{{ product.price | money }}</h6>
                </li>
            </a>
        {% endfor %}
    </ul>
</div>

<style>
    .yotpo__collections-page {
        padding: 0.5rem 0;
    }
    .yotpo .text-m {
        padding-left: 1rem;
    }
    .product-grid__title {
        color: {{ section.settings.color-title }};
        font-size: {{ section.settings.font-size }}rem;
        {% if section.settings.uppercase-title == true %}
            text-transform: uppercase;
        {% endif %}
        {% if section.settings.bold-title == true %}
            font-weight: 600;
        {% endif %}
    }
    .display-grid {
        display: grid;
        {% if section.settings.grid-columns == 2 %}
            grid-template-columns: 1fr 1fr;
        {% elsif section.settings.grid-columns == 3 %}
            grid-template-columns: 1fr 1fr 1fr;
        {% elsif section.settings.grid-columns == 4 %}
            grid-template-columns: 1fr 1fr 1fr 1fr;
        {% endif %} 
        grid-gap: 6rem;
    }
    .product-grid__list-item {
        display: flex;
        flex-direction: column;
        text-align: {{section.settings.text-align}};
    }
    .featured-image {
        border-radius: 0.5rem;
    }
    @media only screen and (max-width: 1200px) {
        .display-grid {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }
    @media only screen and (max-width: 991px) {
        .display-grid {
            grid-template-columns: 1fr 1fr;
            grid-gap: 4rem;
        }
        .product-grid__list-item {
            text-align: {{section.settings.text-align--mobile}};
        }
    }
    @media only screen and (max-width: 767px) {
        .display-grid {
            display: block;
        }
        .product-grid__list-item {
            margin: 3rem auto;
        }
    }
</style>

{% schema %}
{
    "name": "Product Grid (Custom)",
    "tag": "section",
    "class": "collections__products",
    "settings": [
        {
            "type": "range",
            "id": "grid-columns",
            "label": "Grid Columns",
            "min": 1,
            "max": 4,
            "step": 1,
            "default": 3
        },
        {
            "type": "color",
            "id": "color-title",
            "label": "Title Text Color",
            "default": "#000000"
        },
        {
            "type": "checkbox",
            "id": "uppercase-title",
            "label": "Uppercase Title Text",
            "default": false
        },
        {
            "type": "checkbox",
            "id": "bold-title",
            "label": "Bold Title Text",
            "default": false
        },
        {
            "type": "range",
            "id": "font-size",
            "label": "Font Size (rem)",
            "min": 1,
            "max": 12,
            "step": 1,
            "unit": "rem",
            "default": 3
        },
        {
            "type": "select",
            "id": "text-align",
            "label": "Align Text",
            "default": "baseline",
            "options": [
                {
                    "value": "baseline",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "end",
                    "label": "Right"
                }
            ]
        },
        {
            "type": "select",
            "id": "text-align--mobile",
            "label": "Align Text (Tablet/Mobile)",
            "default": "baseline",
            "options": [
                {
                    "value": "baseline",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "end",
                    "label": "Right"
                }
            ]
        },
        {
            "type": "checkbox",
            "id": "enable_filtering",
            "default": true,
            "label": "t:sections.main-collection-product-grid.settings.enable_filtering.label",
            "info": "t:sections.main-collection-product-grid.settings.enable_filtering.info"
          },
          {
            "type": "checkbox",
            "id": "enable_sorting",
            "default": true,
            "label": "t:sections.main-collection-product-grid.settings.enable_sorting.label"
          },
          {
            "type": "checkbox",
            "id": "collapse_on_larger_devices",
            "default": false,
            "label": "t:sections.main-collection-product-grid.settings.collapse_on_larger_devices.label"
          }
    ]
}
{% endschema %}